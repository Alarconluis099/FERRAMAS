<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Ferremas{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous" defer></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.0/css/bulma.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  {% block extra_css %}{% endblock %}
</head>
<body>
  <!-- NAVBAR PRINCIPAL -->
  <nav class="navbar is-warning" role="navigation" aria-label="main navigation" style="box-shadow:0 2px 8px rgba(0,0,0,.08);">
    <div class="navbar-brand">
      <a class="navbar-item" href="{{ url_for('bp.inicio') }}">
        <img src="{{ url_for('static', filename='Imagenes/Marcas/ferremas.png') }}" alt="Ferremas" />
      </a>
      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarMain">
        <span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span>
      </a>
    </div>
    <div id="navbarMain" class="navbar-menu">
      <div class="navbar-start">
        <form class="form-inline">
          <input class="form-control mr-sm-2" id="label_search" type="search" placeholder="¡Hola! ¿Qué estás buscando?" aria-label="Buscar productos">
        </form>
      </div>
      <div class="navbar-end">
        <div class="usuario-navbar">
          <h1>Bienvenido, {{ session.get('usuario') or 'Invitado' }}</h1>
        </div>
        <div class="navbar-item">
          <div class="buttons">
            {% if session.get('usuario') %}
              <a href="{{ url_for('bp.cliente') }}" class="button is-light is-rounded">Perfil</a>
              <a href="{{ url_for('bp.logout') }}" class="button is-light is-rounded">Salir</a>
            {% else %}
              <a href="{{ url_for('bp.login') }}" class="button is-light is-rounded">Ingresar</a>
            {% endif %}
            <a href="{{ url_for('bp.carrito') }}" class="button is-light is-rounded"><i class="bi bi-cart"></i></a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- NAVBAR CATEGORÍAS -->
  <nav class="navbar is-dark" role="navigation" aria-label="categorias" style="box-shadow:0 4px 12px -4px rgba(0,0,0,.2);">
    <div class="navbar-menu" id="navbarCats">
      <div class="navbar-start">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Categorías</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="{{ url_for('bp.inicio') }}#herramientas-manuales">Herramientas manuales</a>
            <a class="navbar-item" href="{{ url_for('bp.inicio') }}#materiales-basicos">Materiales básicos</a>
            <a class="navbar-item" href="{{ url_for('bp.inicio') }}#equipos-seguridad">Equipos de seguridad</a>
            <a class="navbar-item" href="{{ url_for('bp.inicio') }}#tornillos-anclajes">Tornillos y anclajes</a>
            <a class="navbar-item" href="{{ url_for('bp.inicio') }}#fijaciones-adhesivos">Fijaciones y Adhesivos</a>
            <a class="navbar-item" href="{{ url_for('bp.inicio') }}#equipos-medicion">Equipos de medición</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- FLASH MESSAGES -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="container mt-3">
        {% for category, message in messages %}
          <div class="alert alert-{{ 'success' if category=='success' else ('danger' if category=='error' else 'info') }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <!-- MAIN CONTENT -->
  {% block content %}{% endblock %}

  <!-- FOOTER -->
  <footer class="footer">
    <div class="secciones-footer">
      <div class="seccion-contactos">
        <h2>Contáctanos</h2>
        <a href="https://maps.app.goo.gl/HwFHvTRBiNXT5yFv9" target="_blank" rel="noopener"><i class="bi bi-building-fill"></i> Antonio Varas 666, Providencia.</a>
        <p><i class="bi bi-envelope"></i> ferremas@gmail.com</p>
        <p><i class="bi bi-telephone-fill"></i> +56 2 23540400</p>
      </div>
      <div class="seccion-rrss">
        <h2>Redes sociales</h2>
        <a href="#"><i class="bi bi-facebook"></i> Facebook</a>
        <a href="#"><i class="bi bi-instagram"></i> Instagram</a>
        <a href="#"><i class="bi bi-youtube"></i> Youtube</a>
      </div>
      <div class="seccion-metodos-de-pago">
        <h2>Métodos de pago</h2>
        <p>Débito</p>
        <p>Crédito</p>
        <p>Transferencia</p>
      </div>
      <div class="footer-webpay">
        <figure><img src="{{ url_for('static', filename='Imagenes/Marcas/webpay.png') }}" alt="Webpay" /></figure>
      </div>
    </div>
    <div class="copyright">&copy; 2024 Ferremas</div>
  </footer>

  {% block extra_js %}
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      const alerts=document.querySelectorAll('.alert');
      alerts.forEach(a=>setTimeout(()=>{if(a.classList.contains('show')){const inst=bootstrap.Alert.getOrCreateInstance(a);inst.close();}},4000));
    });
  </script>
  {% endblock %}
</body>
</html>
